(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{265:function(e,t,a){e.exports=a(554)},345:function(e,t,a){},408:function(e,t,a){},411:function(e,t,a){},458:function(e,t,a){},547:function(e,t,a){},549:function(e,t,a){},551:function(e,t,a){},554:function(e,t,a){"use strict";a.r(t);a(266),a(271),a(273),a(276),a(282),a(300),a(302);var n=a(1),o=a.n(n),r=a(7),c=a.n(r),s=a(561),l=a(263),i=a(23),u=a(24),m=a(26),p=a(25),h=a(27),d=a(563),f=a(560),g=a(559),v=a(562),b=a(32),y=o.a.createContext(),S=function(e,t){switch(t.type){case"SET_DEVICES":return Object(b.a)({},e,{devices:t.payload});case"SHOW_TABLE_LOADING_OVERLAY":return Object(b.a)({},e,{tableResultsAreLoading:t.payload});case"SHOW_RESULTS_TABLE":return Object(b.a)({},e,{showResultsTable:t.payload});case"SET_COUNTRIES":return Object(b.a)({},e,{countryList:t.payload});case"SET_CREDENTIALS":return Object(b.a)({},e,{credentialsList:t.payload});default:return e}},O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={devices:[],countryList:[],credentialsList:[],tableResultsAreLoading:!1,showResultsTable:!1,dispatch:function(e){return a.setState(function(t){return S(t,e)})}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=Object(b.a)({},this.state),t=this.props.children;return o.a.createElement(y.Provider,{value:e},t)}}]),t}(n.Component),E=(y.Consumer,a(213),a(99)),w=a(2),C=a.n(w),j=(a(556),a(100)),k=a(558),T=(a(345),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={selectedMenuItem:"",isMobileNavExapnded:!1},a.getSelectedClass=function(e){return a.state.selectedMenuItem===e?"selected":""},a.expandCollapseNav=function(e){e.preventDefault();var t=a.state.isMobileNavExapnded;a.setState({isMobileNavExapnded:!t})},a.signout=function(e){var t=a.props.history;e.preventDefault(),localStorage.removeItem("auth"),localStorage.removeItem("roles"),t.push("/public/login")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history;this.setActiveMenuItem(),this.historyUnlisten=t.listen(function(t,a){e.setActiveMenuItem()})}},{key:"componentWillUnmount",value:function(){this.historyUnlisten()}},{key:"setActiveMenuItem",value:function(){var e=Object(k.a)(window.location.pathname,{path:"/:section",strict:!1});e&&this.setState({selectedMenuItem:e.params.section})}},{key:"render",value:function(){var e=this.state.selectedMenuItem;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{selectedKeys:[e],mode:"horizontal",theme:"dark"}))}}]),t}(n.Component)),N=Object(v.a)(T),R=(a(402),a(252)),A=(a(405),a(261)),D=(a(408),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isDarkMode:!1},a.componentWillMount=function(){var e=JSON.parse(localStorage.getItem("dsm-dark-mode"));e&&(document.querySelector("body").className="".concat(e?"dark-theme":"light-theme"),a.setState({isDarkMode:e}))},a.signout=function(e){var t=a.props.history;e.preventDefault(),localStorage.removeItem("auth"),localStorage.removeItem("roles"),t.push("/public/login")},a.handleJiraScriptError=function(){A.a.error("Unfortunately there was an error related to the JIRA issue collector - you will not be able to report any issues.")},a.handleJiraScriptLoad=function(){window.ATL_JQ_PAGE_PROPS={triggerFunction:function(e){document.querySelectorAll(".reportBugLink").forEach(function(t){t.addEventListener("click",function(t){window.ATL_JQ_PAGE_PROPS.fieldValues.summary="[Bug]: ",t.preventDefault(),e()})}),document.querySelectorAll(".reportNewFeatureLink").forEach(function(t){t.addEventListener("click",function(t){window.ATL_JQ_PAGE_PROPS.fieldValues.summary="[NewFeature]: ",t.preventDefault(),e()})})},fieldValues:{summary:"[Bug]: "}}},a.changeTheme=function(e){var t=a.state.isDarkMode;a.setState({isDarkMode:!t},function(){var e=a.state.isDarkMode;document.querySelector("body").className="".concat(e?"dark-theme":"light-theme"),localStorage.setItem("dsm-dark-mode",JSON.stringify(e))})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.isDarkMode;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"user-menu"},o.a.createElement("div",{className:"theme-switch"},o.a.createElement("label",null,"Dark"),o.a.createElement(R.a,{checked:e,onChange:this.changeTheme}))))}}]),t}(n.Component)),F=Object(v.a)(D),I=(a(411),E.a.Header);var L=function(){return o.a.createElement(I,{className:"global-header"},o.a.createElement("a",{className:"brand",href:"/"},o.a.createElement("span",{className:"name"},"Melvin")),o.a.createElement(N,null),o.a.createElement(F,null))},M=(a(166),a(34)),_=(a(415),a(9)),x=(a(227),a(101)),z=a(176),P=a.n(z),W=a(254),H=(a(422),a(131)),U=(a(167),a(31)),V=a(255),K=a(64),q=a.n(K),J=window.__env.apiDomain;q.a.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)});var B=function(e,t,a,n){return q.a.get("".concat(J,"search/?").concat(t,"=").concat(e,"&page=").concat(a.page,"&pagesize=").concat(a.pageSize).concat(a.sorting).concat(a.filtering),n)},G=function(e,t,a){return q.a.get("".concat(J,"typeahead/").concat(t,"/?typeahead=").concat(e,"&limit=").concat(a))},Q=function(e,t,a,n,o){return q.a.get("".concat(J,"typeahead/").concat(o,"/?").concat(e,"=").concat(t).concat(a,"&limit=15"))},Y=(a(555),a(260)),X=a(262),Z=(a(458),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){},a.handleResize=function(e){return function(t,n){var o=n.size;a.setState(function(t){var a=t.columns,n=Object(X.a)(a);return n[e]=Object(b.a)({},n[e],{width:o.width}),{columns:n}})}},a.hostNameClick=function(){console.log("hostNameClick...")},a.handleTableChange=function(e,t,n){(0,a.props.onTableChange)(e,t,n)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rowData,a=e.colDefs,n=e.totalItems,r=e.tableHeight,c=e.page,s=e.isLoading;return o.a.createElement("div",{className:"data-table-wrapper"},o.a.createElement(Y.a,{className:"data-table",components:this.components,dataSource:t,columns:a,loading:s,onChange:this.handleTableChange,pagination:{hideOnSinglePage:!0,defaultPageSize:20,pageSizeOptions:["10","20","50","100"],total:n,current:c,showSizeChanger:!0},scroll:{x:!1,y:r,scrollToFirstRowOnChange:!0}}))}}]),t}(n.Component));Z.defaultProps={isLoading:!0,totalItems:0,page:1,tableHeight:500};var $=Z,ee=(a(547),U.a.Option),te=H.a.OptGroup,ae=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).signal=q.a.CancelToken.source(),a.defaultColumnDefs={suppressMenu:!0},a.searchFilterOptions={IPv4:"&contains-value_type=ipv4_address",Hostname:"&contains-value_type=hostname"},a.state={tableHeight:500,serachOptions:[{Title:"Search",value:"search"},{Title:"IPv4",value:"IPv4"},{Title:"Hostname",value:"Hostname"},{Title:"Regex",value:"regex"},{Title:"Contains",value:"contains"},{Title:"Starts with",value:"startswith"},{Title:"Match",value:"match"}],filterOptions:[{Title:"Contains",value:"contains"},{Title:"Starts with",value:"startswith"},{Title:"Match",value:"match"},{Title:"Not Contains",value:"!contains"},{Title:"Not Starts with",value:"!startswith"},{Title:"Not Match",value:"!match"},{Title:"Any Contains",value:"any_contains"},{Title:"Any Starts with",value:"any_startswith"},{Title:"Any Match",value:"any_match"}],serachOption:"search",searchResults:[],searchColumns:[],searchView:"table",showResultsTable:!1,isLoading:!1,searchValue:"",autoCompleteDataSource:{suggessions:[]},totalItems:0,page:1,pageSize:20,sortingKey:"",sortOrder:"",filters:{},reqTime:0,metaFields:[]},a.tableWrapperRef=o.a.createRef(),a.debouncedOnChange=Object(V.debounce)(function(){a.setState({page:1,sortingKey:"",sortOrder:""}),a.getSearchResults()},100),a.onAutoCompleteChange=function(e){a.setState({searchValue:e||""},function(){a.debouncedOnChange()}),e?G(e||"","value",1).then(function(e){a.setState({autoCompleteDataSource:{suggessions:e.data?e.data:[]}})}).catch(function(e){a.setState({autoCompleteDataSource:{suggessions:[]}})}):a.setState({autoCompleteDataSource:{suggessions:[]}})},a.handleTableChange=function(e,t,n){a.setState({page:e.current,pageSize:e.pageSize,sortingKey:n.columnKey,sortOrder:n.order,filters:t},function(){a.getSearchResults()})},a.getSearchResults=Object(W.a)(P.a.mark(function e(){var t,n,o,r,c,s,l,i,u,m,p,h,d;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.searchValue,o=t.page,r=t.pageSize,c=t.sortingKey,s=t.sortOrder,l=t.filters,i=a.state.serachOption,a.handleWindowResize(),u={},a.lastSession=u,a.setState({showResultsTable:!0,isLoading:!0}),e.prev=6,m="","ascend"===s&&(m="&sortby=".concat(c)),"descend"===s&&(m="&sortby=-".concat(c)),p=[],l&&(p=Object.keys(l).map(function(e){var t=l[e].value?l[e].value:"",a=l[e].option?l[e].option:"contains";return"&".concat(a,"-").concat(e,"=").concat(t)})),"IPv4"!==i&&"Hostname"!==i||(p.unshift(a.searchFilterOptions[i]),i="search"),h=p.join(""),e.next=16,B(n,i,{page:o,pageSize:r,sorting:c?m:"",filtering:h},{cancelToken:a.signal.token});case 16:if(d=e.sent,a.lastSession===u){e.next=19;break}return e.abrupt("return");case 19:a.onGetSearchSuccess(d),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),a.onSearchEmpty();case 25:case"end":return e.stop()}},e,null,[[6,22]])})),a.onGetSearchSuccess=function(e){a.parseTableData(e.data?e.data:[]),a.setState({isLoading:!1,totalItems:e.headers["total-items"]?e.headers["total-items"]:100,reqTime:e.headers["query-duration"]?e.headers["query-duration"]:"50ms"})},a.clickApplyFilters=function(){a.getSearchResults()},a.clickResetFilters=function(){var e=a.state.filters,t={};Object.keys(e).map(function(a){return t[a]=Object(b.a)({},e[a],{value:""}),a}),a.setState({filters:t},function(){a.getSearchResults()})},a.onColumnFilterKeyUpFocus=function(e,t,n){var o="";o=e&&e.target?e.target.value:e;var r=a.state.filters;e&&13===e.keyCode||n?(r[t].value=o,a.setState({filters:r},function(){a.getSearchResults()})):(r[t].value=o,r[t].autoCompleteOptions=[],a.setState({filters:r},function(){a.onColumnFilterAutocomplete(e,t)}))},a.onColumnFilterAutocomplete=function(e,t){var n=a.state,o=n.filters,r=n.serachOption,c=n.searchValue,s=e,l=[];o&&(l=Object.keys(o).map(function(e){var t=o[e].value?o[e].value:"",a=o[e].option?o[e].option:"contains";return"&".concat(a,"-").concat(e,"=").concat(t)}));var i=l.join("");Q(r,c,i,s,t).then(function(e){o[t].autoCompleteOptions=e.data?e.data:[],a.setState({filters:o})}).catch(function(e){o[t].autoCompleteOptions=[],a.setState({filters:o})})},a.onColumnFilterOptionChange=function(e,t){var n=a.state.filters;n[t].option!==e&&(n[t].option=e,a.setState({filters:n}),n[t].value&&a.getSearchResults())},a.renderTitleWithFilter=function(e,t){var n=a.state,r=n.filterOptions,c=n.filters;return c[e]?o.a.createElement("div",{className:"custom-hd-wrp"},o.a.createElement("div",{className:"hd-label"},t),o.a.createElement("div",{onClick:function(e){e.stopPropagation()}},o.a.createElement(U.a,{placeholder:"Select Option",dropdownClassName:"table-filter-dropdown",defaultValue:"contains",onSelect:function(t){a.onColumnFilterOptionChange(t,e)}},r.map(function(e){return o.a.createElement(ee,{value:e.value,key:e.value},e.Title)})),o.a.createElement(H.a,{dataSource:c[e].autoCompleteOptions,style:{width:200},defaultActiveFirstOption:!1,dropdownClassName:"column-filter-dropdown",value:c[e].value,onSelect:function(t){a.onColumnFilterKeyUpFocus(t,e,!0)},onSearch:function(t){a.onColumnFilterKeyUpFocus(t,e)},placeholder:t},o.a.createElement(x.a,{onKeyUp:function(t){a.onColumnFilterKeyUpFocus(t,e)},onFocus:function(t){a.onColumnFilterKeyUpFocus(t,e)}})))):""},a.createColDefs=function(){var e=a.state.metaFields,t=[];return e.map(function(e){e.isShow&&t.push({title:a.renderTitleWithFilter(e.name,e.label),dataIndex:e.name,key:e.name,className:e.name,sorter:!0,width:e.width?e.width:130})}),t},a.parseTableData=function(e){var t=e.meta,n=a.state.filters;e.meta.fields.forEach(function(e,t){n[e.name]||(n[e.name]={option:"contains",value:"",autoCompleteOptions:[]})}),a.setState({filters:n,metaFields:t.fields},function(){var n=e.data.map(function(e,t){return Object(b.a)({},e,{key:t})});a.setState({searchResults:n,searchView:t.view,showResultsTable:!0})})},a.onSearchEmpty=function(){a.setState({searchResults:[],searchView:"table",showResultsTable:!0,isLoading:!1,page:0,totalItems:0})},a.setTableDimensions=function(){var e=a.tableWrapperRef.current.getBoundingClientRect().top,t=window.innerHeight-e-70-115;a.setState({tableHeight:t})},a.handleWindowResize=function(){a.setTableDimensions()},a.searchOptionChange=function(e){a.setState({serachOption:e},function(){a.debouncedOnChange()})},a.renderOption=function(){var e=a.state.autoCompleteDataSource;return Object.keys(e).map(function(t){return o.a.createElement(te,{key:t,label:"suggessions"===t?"Suggestions":"Recent Searches"},e[t].map(function(e){return o.a.createElement(ee,{key:e,text:e},"loading"===e?o.a.createElement(_.a,{type:"loading"}):o.a.createElement("div",{className:"global-search-item"},o.a.createElement("span",{className:"global-search-item-desc"},e),"resentSearch"===t?o.a.createElement("span",{className:"search-history-remove"},"Remove"):""))}))})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowResize),this.setState({autoCompleteDataSource:{suggessions:[]}})}},{key:"componentWillUnmount",value:function(){this.signal.cancel("Canceled"),window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,r=t.reqTime,c=t.serachOptions,s=t.serachOption,l=t.searchResults,i=t.autoCompleteDataSource,u=t.tableHeight,m=t.searchView,p=t.showResultsTable,h=t.totalItems,d=t.page,f=this.createColDefs();return o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"search-input-wrapper initial-search-done clearfix"},o.a.createElement("div",{className:"top-option-box"},o.a.createElement(U.a,{placeholder:"Select Option",className:"search-select-options",onSelect:this.searchOptionChange,value:s},c.map(function(e){return o.a.createElement(ee,{value:e.value,key:e.value},e.Title)})),0!==h&&o.a.createElement("div",{className:"search-info ".concat(a?"loading":"")},a&&o.a.createElement("span",{className:"loading"},o.a.createElement(_.a,{type:"loading"})),o.a.createElement("span",null,"About "),parseInt(h,0).toLocaleString(),o.a.createElement("span",null," results ("),r,o.a.createElement("span",null,")"))),o.a.createElement("div",{className:"top-search-box"},o.a.createElement("div",{className:"global-search-wrapper"},o.a.createElement(H.a,{className:"search-input",size:"large",dataSource:i.suggessions,style:{width:"100%"},dropdownClassName:"column-filter-dropdown",defaultActiveFirstOption:!1,allowClear:!0,onSelect:function(t){return e.onAutoCompleteChange(t)},onSearch:function(t){return e.onAutoCompleteChange(t)},autoFocus:!0},o.a.createElement(x.a,{className:"search-input",placeholder:"Search...",prefix:o.a.createElement(_.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),size:"large"}))))),o.a.createElement("div",{className:"search-filter-wrapper"},o.a.createElement(M.a,{className:"ant-btn-primary",onClick:this.clickResetFilters},o.a.createElement(_.a,{type:"filter"}),"Reset"),o.a.createElement(M.a,{className:"ant-btn-primary",onClick:this.clickApplyFilters},"Apply")),o.a.createElement("div",{className:"search-table-wrapper"},o.a.createElement("div",{ref:this.tableWrapperRef,className:"search-results"},"table"===m&&p&&o.a.createElement($,{colDefs:f,rowData:l,tableHeight:u,totalItems:h,page:d,isLoading:a,onTableChange:this.handleTableChange}))))}}]),t}(n.Component);var ne=function(){return o.a.createElement(n.Fragment,null,o.a.createElement(ae,null))},oe=(a(549),E.a.Content),re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).routes=function(){return o.a.createElement(d.a,null,o.a.createElement(g.a,{exact:!0,path:"/",component:ne}),o.a.createElement(g.a,{render:function(){return o.a.createElement(f.a,{to:{pathname:"/"}})}}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props.location,t=C()("global-content",{"global-content-search":"/search"===e.pathname,"global-content-devices":"/devices"===e.pathname,"global-content-policies":"/policies"===e.pathname,"global-content-admin":0===e.pathname.indexOf("/admin/")});return o.a.createElement(E.a,{className:"global-layout"},o.a.createElement(L,null),o.a.createElement(oe,{className:t},this.routes()))}}]),t}(n.Component),ce=Object(v.a)(re),se=(a(551),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={},e.webPingTimer=null,e.showNotification=!0,e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.a.createElement(O,null,o.a.createElement(d.a,null,o.a.createElement(le,{path:"/",component:ce}),o.a.createElement(f.a,{to:"/"})))}}]),t}(o.a.Component)),le=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return o.a.createElement(g.a,Object.assign({},a,{render:function(e){return o.a.createElement(t,e)}}))},ie=Object(v.a)(se);c.a.render(o.a.createElement(s.a,null,o.a.createElement(ie,null)),document.getElementById("root"))}},[[265,2,1]]]);
//# sourceMappingURL=main.00682a64.chunk.js.map