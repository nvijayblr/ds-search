(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{262:function(e,t,a){e.exports=a(555)},394:function(e,t,a){},542:function(e,t,a){},552:function(e,t,a){},555:function(e,t,a){"use strict";a.r(t);a(263),a(268),a(270),a(273),a(279),a(297),a(299);var n=a(0),r=a.n(n),s=a(3),c=a.n(s),o=a(559),l=a(41),i=a(42),u=a(46),h=a(43),p=a(47),m=a(36),d=r.a.createContext(),g=function(e,t){switch(t.type){case"SET_SEARCH_RESULTS":return Object(m.a)({},e,{results:t.payload});case"SHOW_TABLE_LOADING_OVERLAY":return Object(m.a)({},e,{tableResultsAreLoading:t.payload});case"SHOW_RESULTS_TABLE":return Object(m.a)({},e,{showResultsTable:t.payload});default:return e}},b=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={results:[],tableResultsAreLoading:!1,showResultsTable:!1,dispatch:function(e){return a.setState(function(t){return g(t,e)})}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=Object(m.a)({},this.state),t=this.props.children;return r.a.createElement(d.Provider,{value:e},t)}}]),t}(n.Component),f=(d.Consumer,a(335),a(259)),S=(a(205),a(117)),O=(a(343),a(168)),w=(a(344),a(5)),v=a(164),y=a.n(v),E=a(249),C=a(88),R=(a(349),a(167)),j=(a(138),a(25)),T=a(250),k=a(89),L=a.n(k),D=window.__env.searchApi;L.a.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)});var z=function(e,t,a){return L.a.get("".concat(D).concat(e,"&page=").concat(t.page,"&pagesize=").concat(t.pageSize,"&").concat(t.sorting),a)},N=(a(556),a(257)),x=a(258),A=(a(385),a(2),a(394),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){for(var e=[],t=0;t<100;t++)e.push({key:t,name:"Edward King ".concat(t),age:32,address:"London, Park Lane no. ".concat(t)});a.setState({dataSource:e})},a.handleResize=function(e){return function(t,n){var r=n.size;a.setState(function(t){var a=t.columns,n=Object(x.a)(a);return n[e]=Object(m.a)({},n[e],{width:r.width}),{columns:n}})}},a.hostNameClick=function(){console.log("hostNameClick...")},a.handleTableChange=function(e,t,n){a.props.onTableChange(e,t,n)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.rowData,a=e.colDefs,n=e.totalItems,s=e.tableHeight,c=e.page,o=e.isLoading;return r.a.createElement("div",{className:"data-table-wrapper"},r.a.createElement(N.a,{className:"data-table",components:this.components,dataSource:t,columns:a,loading:o,onChange:this.handleTableChange,pagination:{total:n,current:c,showSizeChanger:!0},scroll:{x:!1,y:s,scrollToFirstRowOnChange:!0}}))}}]),t}(n.Component));A.defaultProps={isLoading:!0};var I=A,W=(a(542),j.a.Option),H=R.a.OptGroup,V=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).signal=L.a.CancelToken.source(),a.defaultColumnDefs={suppressMenu:!0},a.state={tableHeight:500,hiddenColumns:[],serachOptions:[{Title:"Default",value:"default"}],serachOption:"default",searchResults:[],searchColumns:[],searchView:"table",showResultsTable:!1,isLoading:!1,searchValue:"",context:{componentParent:Object(C.a)(Object(C.a)(a))},autoCompleteDataSource:{resentSearch:[],suggessions:[]},totalItems:0,page:1,pageSize:10,sortingKey:"",sortOrder:"",reqTime:0},a.tableWrapperRef=r.a.createRef(),a.debouncedOnChange=Object(T.debounce)(function(){a.setState({page:1,sortingKey:""}),a.getSearchResults()},500),a.onChange=function(e){var t=a.state.autoCompleteDataSource;a.setState({autoCompleteDataSource:{resentSearch:t.resentSearch,suggessions:e.length?["loading"]:[]}}),a.setState({searchValue:e},function(){a.debouncedOnChange()})},a.handleTableChange=function(e,t,n){a.setState({page:e.current,pageSize:e.pageSize,sortingKey:n.columnKey,sortOrder:n.order},function(){a.getSearchResults()})},a.getReuestTimer=function(e){var t=Date.now(),n=Math.floor((t-e)/1e3),r=Math.floor((t-e)%1e3);a.setState({reqTime:"".concat(n,".").concat(r," seconds")})},a.getSearchResults=Object(E.a)(y.a.mark(function e(){var t,n,r,s,c,o,l,i,u,h,p;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.searchValue,t.serachOption,r=t.page,s=t.pageSize,c=t.sortingKey,o=t.sortOrder,l=a.state.autoCompleteDataSource,a.handleWindowResize(),i={},a.lastSession=i,n){e.next=8;break}return a.onSearchEmpty(),e.abrupt("return");case 8:return a.setState({autoCompleteDataSource:{resentSearch:l.resentSearch,suggessions:[]}}),a.setState({showResultsTable:!0,isLoading:!0}),e.prev=10,u="","ascend"===o&&(u="&sortby=".concat(c)),"descend"===o&&(u="&sortby=-".concat(c)),h=Date.now(),e.next=17,z(n,{page:r,pageSize:s,sorting:c?u:""},{cancelToken:a.signal.token});case 17:if(p=e.sent,a.lastSession===i){e.next=20;break}return e.abrupt("return");case 20:a.getReuestTimer(h),a.onGetSearchSuccess(p),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),a.onSearchEmpty();case 27:case"end":return e.stop()}},e,null,[[10,24]])})),a.onGetSearchSuccess=function(e){a.parseTableData(e.data?e.data:[]),a.setState({isLoading:!1,totalItems:e.headers["total-items"]?e.headers["total-items"]:1e3})},a.parseTableData=function(e){var t=e.meta,n=e.meta.fields.map(function(e){return{title:e.label,dataIndex:e.name,key:e.name,sorter:!0}}),r=e.data.map(function(e,t){return Object(m.a)({},e,{key:t})});a.setState({searchResults:r,searchColumns:n,searchView:t.view,showResultsTable:!0})},a.onSearchEmpty=function(){a.setState({searchResults:[],searchColumns:[],searchView:"table",showResultsTable:!0,isLoading:!1,page:0,totalItems:0})},a.setTableDimensions=function(){var e=a.tableWrapperRef.current.getBoundingClientRect().top,t=window.innerHeight-e-70-50;a.setState({tableHeight:t})},a.handleWindowResize=function(){a.setTableDimensions()},a.searchOptionChange=function(e){a.setState({serachOption:e})},a.renderOption=function(){var e=a.state.autoCompleteDataSource;return Object.keys(e).map(function(t){return r.a.createElement(H,{key:t,label:"suggessions"===t?"Suggestions":"Recent Searches"},e[t].map(function(e){return r.a.createElement(W,{key:e,text:e},"loading"===e?r.a.createElement(w.a,{type:"loading"}):r.a.createElement("div",{className:"global-search-item"},r.a.createElement("span",{className:"global-search-item-desc"},e),"resentSearch"===t?r.a.createElement("span",{className:"search-history-remove"},"Remove"):""))}))})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowResize),this.setState({autoCompleteDataSource:{resentSearch:[],suggessions:[]}})}},{key:"componentWillUnmount",value:function(){this.signal.cancel("Canceled"),window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchValue,s=t.isLoading,c=t.reqTime,o=t.serachOptions,l=t.serachOption,i=t.searchResults,u=t.searchColumns,h=t.tableHeight,p=t.searchView,m=t.showResultsTable,d=t.totalItems,g=t.page;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"search-input-wrapper initial-search-done"},r.a.createElement(f.a,{gutter:12},r.a.createElement(O.a,{span:6},r.a.createElement(j.a,{placeholder:"Select Option",className:"search-select-options",onSelect:this.searchOptionChange,value:l},o.map(function(e){return r.a.createElement(W,{value:e.value,key:e.value},e.Title)}))),r.a.createElement(O.a,{span:18},r.a.createElement("div",{className:"global-search-wrapper"},r.a.createElement(R.a,{className:"search-input",size:"large",style:{width:"100%"},dropdownStyle:{width:"500px"},onSearch:this.handleSearch,optionLabelProp:"text",onChange:function(t){return e.onChange(t)},ref:function(t){e.searchInput=t}},r.a.createElement(S.a,{className:"search-input",placeholder:"Search...",prefix:r.a.createElement(w.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),size:"large"})),d&&a&&!s&&r.a.createElement("div",{className:"search-info"},"About ",parseInt(d).toLocaleString()," results (",c,")"))))),r.a.createElement("div",{className:"search-table-wrapper"},r.a.createElement("div",{ref:this.tableWrapperRef,className:"search-results"},"table"===p&&m&&r.a.createElement(I,{colDefs:u,rowData:i,tableHeight:h,totalItems:d,page:g,isLoading:s,onTableChange:this.handleTableChange}))))}}]),t}(n.Component),_=(a(552),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(b,null,r.a.createElement(V,null))}}]),t}(r.a.Component));c.a.render(r.a.createElement(o.a,null,r.a.createElement(_,null)),document.getElementById("root"))}},[[262,2,1]]]);
//# sourceMappingURL=main.39fc005f.chunk.js.map