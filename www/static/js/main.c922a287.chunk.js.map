{"version":3,"sources":["context.js","services/api.js","components/Datatable/DataTable.js","components/Search/SearchComponent.js","App.js","index.js"],"names":["Context","React","createContext","reducer","state","action","type","Object","objectSpread","results","payload","tableResultsAreLoading","showResultsTable","Provider","_Component","_getPrototypeOf2","_this","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","dispatch","setState","inherits","createClass","key","value","children","props","react_default","a","createElement","Component","Consumer","searchApi","window","__env","axios","interceptors","request","use","config","error","Promise","reject","getSearchRequest","query","option","signal","get","page","pageSize","sorting","DataTable","componentDidMount","data","i","push","name","age","address","dataSource","handleResize","index","e","_ref","size","_ref2","columns","nextColumns","toConsumableArray","width","hostNameClick","console","log","handleTableChange","pagination","filters","sorter","onTableChange","_this$props","rowData","colDefs","totalItems","tableHeight","isLoading","className","table","components","loading","onChange","total","current","showSizeChanger","scroll","y","defaultProps","Option","OptGroup","SearchComponent","CancelToken","source","defaultColumnDefs","suppressMenu","hiddenColumns","serachOptions","Title","serachOption","searchResults","searchColumns","searchView","searchValue","context","componentParent","assertThisInitialized","autoCompleteDataSource","resentSearch","suggessions","sortingKey","sortOrder","reqTime","tableWrapperRef","createRef","debouncedOnChange","debounce","getSearchResults","columnKey","order","getReuestTimer","reqStartTime","now","Date","seconds","Math","floor","milliseconds","_callee","_this$state","currentSession","sort","res","regenerator_default","wrap","_context","prev","next","handleWindowResize","lastSession","onSearchEmpty","abrupt","cancelToken","token","sent","onGetSearchSuccess","t0","stop","parseTableData","headers","meta","fields","map","col","title","label","dataIndex","view","setTableDimensions","offsetTop","getBoundingClientRect","top","innerHeight","searchOptionChange","renderOption","keys","group","item","text","icon","addEventListener","cancel","removeEventListener","_this2","_this$state2","react","row","gutter","span","es_select","placeholder","onSelect","auto_complete","style","dropdownStyle","onSearch","handleSearch","optionLabelProp","ref","node","searchInput","input","prefix","color","parseInt","toLocaleString","components_Datatable_DataTable","App","context_Provider","components_Search_SearchComponent","ReactDOM","render","BrowserRouter","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.c922a287.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const Context = React.createContext();\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_SEARCH_RESULTS\":\n      return {\n        ...state,\n        results: action.payload,\n      };\n    case \"SHOW_TABLE_LOADING_OVERLAY\":\n      return {\n        ...state,\n        tableResultsAreLoading: action.payload,\n      };\n    case \"SHOW_RESULTS_TABLE\":\n      return {\n        ...state,\n        showResultsTable: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport class Provider extends Component {\n  state = {\n    results: [],\n    tableResultsAreLoading: false,\n    showResultsTable: false,\n    dispatch: (action) => this.setState((state) => reducer(state, action)),\n  };\n\n  render() {\n    const state = { ...this.state };\n    const { children } = this.props;\n\n    return <Context.Provider value={state}>{children}</Context.Provider>;\n  }\n}\n\nProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport const Consumer = Context.Consumer; // eslint-disable-line prefer-destructuring\n","/* eslint no-underscore-dangle: [1, { \"allow\": [\"__env\"] }] */\nimport axios from \"axios\";\n\nconst { searchApi } = window.__env;\n\naxios.interceptors.request.use(\n  (config) => {\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\nexport const getSearchRequest = (query, option, signal) =>\n  axios.get(\n    `${searchApi}${query}&page=${option.page}&pagesize=${option.pageSize}&${option.sorting}`,\n    signal\n  );\n","/* eslint-disable jsx-a11y/anchor-is-valid */\n/* eslint-disable no-param-reassign */\nimport React, { Component } from \"react\";\nimport { Table } from \"antd\";\nimport { Resizable } from \"react-resizable\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n\nimport \"./DataTable.scss\";\n\nclass DataTable extends Component {\n  // ResizeableTitle = (props) => {\n  //   const { onResize, width, ...restProps } = props;\n  //   if (!width) {\n  //     return <th {...restProps} />;\n  //   }\n\n  //   return (\n  //     <Resizable\n  //       width={width}\n  //       height={0}\n  //       handle={\n  //         <span\n  //           className=\"react-resizable-handle\"\n  //           onClick={(e) => {\n  //             e.stopPropagation();\n  //           }}\n  //         />\n  //       }\n  //       onResize={onResize}\n  //       draggableOpts={{ enableUserSelectHack: false }}\n  //     >\n  //       <th {...restProps} />\n  //     </Resizable>\n  //   );\n  // };\n\n  // components = {\n  //   header: {\n  //     cell: this.ResizeableTitle,\n  //   },\n  // };\n\n  componentDidMount = () => {\n    const data = [];\n    for (let i = 0; i < 100; i++) {\n      data.push({\n        key: i,\n        name: `Edward King ${i}`,\n        age: 32,\n        address: `London, Park Lane no. ${i}`,\n      });\n    }\n    this.setState({ dataSource: data });\n  };\n\n  handleResize = (index) => (e, { size }) => {\n    this.setState(({ columns }) => {\n      const nextColumns = [...columns];\n      nextColumns[index] = {\n        ...nextColumns[index],\n        width: size.width,\n      };\n      return { columns: nextColumns };\n    });\n  };\n\n  hostNameClick = () => {\n    console.log(\"hostNameClick...\");\n  };\n\n  handleTableChange = (pagination, filters, sorter) => {\n    this.props.onTableChange(pagination, filters, sorter);\n  };\n\n  render() {\n    const {\n      rowData,\n      colDefs,\n      totalItems,\n      tableHeight,\n      page,\n      isLoading,\n    } = this.props;\n\n    return (\n      <div className=\"data-table-wrapper\">\n        <Table\n          className=\"data-table\"\n          components={this.components}\n          dataSource={rowData}\n          columns={colDefs}\n          loading={isLoading}\n          onChange={this.handleTableChange}\n          pagination={{\n            total: totalItems,\n            current: page,\n            showSizeChanger: true,\n          }}\n          scroll={{ y: tableHeight }}\n        />\n      </div>\n    );\n  }\n}\n\nDataTable.defaultProps = {\n  isLoading: true,\n};\n\nDataTable.propTypes = {\n  colDefs: PropTypes.array.isRequired,\n  rowData: PropTypes.array.isRequired,\n  totalItems: PropTypes.number,\n  page: PropTypes.number,\n  tableHeight: PropTypes.number,\n  isLoading: PropTypes.bool,\n};\n\nexport default DataTable;\n","/* eslint-disable no-param-reassign */\n/* eslint no-underscore-dangle: [1, { \"allow\": [\"__env\"] }] */\nimport React, { Component, Fragment } from \"react\";\nimport { Row, Col, Input, Icon, Select, AutoComplete } from \"antd\";\nimport { debounce } from \"lodash\";\nimport axios from \"axios\";\n\nimport { getSearchRequest } from \"../../services/api\";\nimport DataTable from \"../Datatable/DataTable\";\n\nimport \"./SearchComponent.scss\";\n\nconst { Option } = Select;\nconst { OptGroup } = AutoComplete;\n\nclass SearchComponent extends Component {\n  signal = axios.CancelToken.source();\n\n  defaultColumnDefs = {\n    suppressMenu: true,\n  };\n\n  state = {\n    tableHeight: 500,\n    hiddenColumns: [],\n    serachOptions: [{ Title: \"Default\", value: \"default\" }],\n    serachOption: \"default\",\n    searchResults: [],\n    searchColumns: [],\n    searchView: \"table\",\n    showResultsTable: false,\n    isLoading: false,\n    searchValue: \"\",\n    context: { componentParent: this },\n    autoCompleteDataSource: {\n      resentSearch: [],\n      suggessions: [],\n    },\n    totalItems: 0,\n    page: 1,\n    pageSize: 10,\n    sortingKey: \"\",\n    sortOrder: \"\",\n    reqTime: 0,\n  };\n\n  tableWrapperRef = React.createRef();\n\n  debouncedOnChange = debounce(() => {\n    this.setState({\n      page: 1,\n      sortingKey: \"\",\n    });\n\n    this.getSearchResults();\n  }, 500);\n\n  componentWillMount() {\n    window.addEventListener(\"resize\", this.handleWindowResize);\n    this.setState({\n      autoCompleteDataSource: {\n        resentSearch: [],\n        suggessions: [],\n      },\n    });\n  }\n\n  componentWillUnmount() {\n    this.signal.cancel(\"Canceled\");\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n  }\n\n  onChange = (e) => {\n    // const { value } = e.target;\n    const { autoCompleteDataSource } = this.state;\n    this.setState({\n      autoCompleteDataSource: {\n        resentSearch: autoCompleteDataSource.resentSearch,\n        suggessions: e.length ? [\"loading\"] : [],\n      },\n    });\n    this.setState({ searchValue: e }, () => {\n      this.debouncedOnChange();\n    });\n  };\n\n  handleTableChange = (pagination, filters, sorter) => {\n    // console.log(\"handleTableChange....\", pagination, filters, sorter);\n    this.setState(\n      {\n        page: pagination.current,\n        pageSize: pagination.pageSize,\n        sortingKey: sorter.columnKey,\n        sortOrder: sorter.order,\n      },\n      () => {\n        this.getSearchResults();\n      }\n    );\n  };\n\n  getReuestTimer = (reqStartTime) => {\n    let now = Date.now();\n    let seconds = Math.floor((now - reqStartTime) / 1000);\n    let milliseconds = Math.floor((now - reqStartTime) % 1000);\n    this.setState({ reqTime: `${seconds}.${milliseconds} seconds` });\n  };\n\n  getSearchResults = async () => {\n    const {\n      searchValue,\n      serachOption,\n      page,\n      pageSize,\n      sortingKey,\n      sortOrder,\n    } = this.state;\n    const { autoCompleteDataSource } = this.state;\n\n    this.handleWindowResize();\n\n    const currentSession = {};\n    this.lastSession = currentSession;\n\n    if (!searchValue) {\n      this.onSearchEmpty();\n      return;\n    }\n    this.setState({\n      autoCompleteDataSource: {\n        resentSearch: autoCompleteDataSource.resentSearch,\n        suggessions: [],\n      },\n    });\n    this.setState({\n      showResultsTable: true,\n      isLoading: true,\n    });\n    try {\n      let sort = \"\";\n      if (sortOrder === \"ascend\") {\n        sort = `&sortby=${sortingKey}`;\n      }\n      if (sortOrder === \"descend\") {\n        sort = `&sortby=-${sortingKey}`;\n      }\n      let reqStartTime = Date.now();\n      const res = await getSearchRequest(\n        searchValue,\n        {\n          page,\n          pageSize,\n          sorting: sortingKey ? sort : \"\",\n        },\n        {\n          cancelToken: this.signal.token,\n        }\n      );\n\n      if (this.lastSession !== currentSession) return;\n      this.getReuestTimer(reqStartTime);\n      this.onGetSearchSuccess(res);\n    } catch (e) {\n      this.onSearchEmpty();\n    }\n  };\n\n  onGetSearchSuccess = (res) => {\n    this.parseTableData(res.data ? res.data : []);\n    this.setState({\n      isLoading: false,\n      totalItems: res.headers[\"total-items\"]\n        ? res.headers[\"total-items\"]\n        : 1000,\n    });\n  };\n\n  parseTableData = (data) => {\n    const { meta } = data;\n    const colDefs = data.meta.fields.map((col) => {\n      return {\n        title: col.label,\n        dataIndex: col.name,\n        key: col.name,\n        sorter: true,\n      };\n    });\n\n    const rowData = data.data.map((data, index) => {\n      return {\n        ...data,\n        key: index,\n      };\n    });\n\n    this.setState({\n      searchResults: rowData,\n      searchColumns: colDefs,\n      searchView: meta.view,\n      showResultsTable: true,\n    });\n  };\n\n  onSearchEmpty = () => {\n    // message.error(\"Unfortunately there was an error getting the results\");\n    this.setState({\n      searchResults: [],\n      searchColumns: [],\n      searchView: \"table\",\n      showResultsTable: true,\n      isLoading: false,\n      page: 0,\n      totalItems: 0,\n    });\n  };\n\n  setTableDimensions = () => {\n    const marginBottom = 70;\n    const offsetTop = this.tableWrapperRef.current.getBoundingClientRect().top;\n    const tableHeight = window.innerHeight - offsetTop - marginBottom - 50;\n    this.setState({ tableHeight });\n  };\n\n  handleWindowResize = () => {\n    this.setTableDimensions();\n  };\n\n  searchOptionChange = (serachOption) => {\n    this.setState({ serachOption });\n  };\n\n  renderOption = () => {\n    const { autoCompleteDataSource } = this.state;\n    const options = Object.keys(autoCompleteDataSource).map((group) => {\n      return (\n        <OptGroup\n          key={group}\n          label={group === \"suggessions\" ? \"Suggestions\" : \"Recent Searches\"}\n        >\n          {autoCompleteDataSource[group].map((item) => (\n            <Option key={item} text={item}>\n              {item === \"loading\" ? (\n                <Icon type=\"loading\" />\n              ) : (\n                <div className=\"global-search-item\">\n                  <span className=\"global-search-item-desc\">{item}</span>\n                  {group === \"resentSearch\" ? (\n                    <span className=\"search-history-remove\">Remove</span>\n                  ) : (\n                    \"\"\n                  )}\n                </div>\n              )}\n            </Option>\n          ))}\n        </OptGroup>\n      );\n    });\n\n    return options;\n  };\n\n  render() {\n    const {\n      searchValue,\n      isLoading,\n      reqTime,\n      serachOptions,\n      serachOption,\n      searchResults,\n      searchColumns,\n      tableHeight,\n      searchView,\n      showResultsTable,\n      totalItems,\n      page,\n    } = this.state;\n\n    return (\n      <Fragment>\n        <div className=\"search-input-wrapper initial-search-done\">\n          <Row gutter={12}>\n            <Col span={6}>\n              <Select\n                placeholder=\"Select Option\"\n                className=\"search-select-options\"\n                onSelect={this.searchOptionChange}\n                value={serachOption}\n              >\n                {serachOptions.map((option) => (\n                  <Option value={option.value} key={option.value}>\n                    {option.Title}\n                  </Option>\n                ))}\n              </Select>\n            </Col>\n            <Col span={18}>\n              <div className=\"global-search-wrapper\">\n                <AutoComplete\n                  className=\"search-input\"\n                  size=\"large\"\n                  style={{ width: \"100%\" }}\n                  dropdownStyle={{ width: \"500px\" }}\n                  onSearch={this.handleSearch}\n                  optionLabelProp=\"text\"\n                  onChange={(e) => this.onChange(e)}\n                  ref={(node) => {\n                    this.searchInput = node;\n                  }}\n                >\n                  <Input\n                    className=\"search-input\"\n                    placeholder=\"Search...\"\n                    prefix={\n                      <Icon\n                        type=\"search\"\n                        style={{ color: \"rgba(0,0,0,.25)\" }}\n                      />\n                    }\n                    size=\"large\"\n                  />\n                </AutoComplete>\n                {totalItems && searchValue && !isLoading && (\n                  <div className=\"search-info\">\n                    About {parseInt(totalItems).toLocaleString()} results (\n                    {reqTime})\n                  </div>\n                )}\n              </div>\n            </Col>\n          </Row>\n        </div>\n\n        <div className=\"search-table-wrapper\">\n          <div ref={this.tableWrapperRef} className=\"search-results\">\n            {searchView === \"table\" && showResultsTable && (\n              <DataTable\n                colDefs={searchColumns}\n                rowData={searchResults}\n                tableHeight={tableHeight}\n                totalItems={totalItems}\n                page={page}\n                isLoading={isLoading}\n                onTableChange={this.handleTableChange}\n              />\n            )}\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SearchComponent;\n","import React from \"react\";\nimport { Provider } from \"./context\";\nimport SearchComponent from \"./components/Search/SearchComponent\";\nimport \"./App.scss\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <Provider>\n        <SearchComponent></SearchComponent>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","import 'core-js/fn/string/ends-with';\nimport 'core-js/fn/string/starts-with';\nimport 'core-js/fn/array/includes';\nimport 'core-js/fn/array/find';\nimport 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport 'react-app-polyfill/ie11';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}